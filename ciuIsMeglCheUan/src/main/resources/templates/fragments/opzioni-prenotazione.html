<div th:fragment="opzioniPrenotazioneContent">
    <div style="
        background: rgba(255,255,255,0.98);
        border-radius: 20px;
        box-shadow: 0 8px 25px rgba(0,153,213,0.10);
        padding: 32px 28px 28px 28px;
        max-width: 560px;
        margin: 0 auto;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    ">
        <h3 style="color:#0099d5; font-weight:700; margin-bottom:18px; letter-spacing:0.5px; font-size: 22px;">
            Opzioni Prenotazione per <span th:text="${scooter.targa}">TARGA</span>
        </h3>
        <div style="margin-bottom:14px;">
            <span class="detail-label" style="color: #666; font-weight:600;">Prezzo base bassa stagione:</span>
            <span class="detail-value" style="color:#0099d5; font-weight:700; font-size:18px; margin-left: 6px;"
                  th:text="|${#numbers.formatDecimal(prezzoBassaStagione, 1, 2)} € / giorno|">25.00 € / giorno</span>
        </div>
        <form th:action="@{/selezioneAccessori}" method="post" style="margin-bottom:0;">
            <div style="margin-top:24px;">
                <span style="font-weight:600; color:#007ab8;">Accessori disponibili:</span>
                <ul style="list-style:none; padding:0; margin:10px 0 0 0;">
                    <li th:each="acc : ${accessori}" style="margin-bottom:12px; display: flex; align-items: center;">
                        <label style="display:flex; align-items:center; cursor:pointer; width:100%;">
                            <input type="checkbox" name="accessori" th:value="${acc.id}"
                                   style="accent-color:#0099d5; width:20px; height:20px; margin-right:12px;" />
                            <span style="font-weight:600; color:#333;" th:text="${acc.descrizione}">Accessorio</span>
                            <span style="margin-left:5px; white-space:nowrap;">
                                <span style="color:#0099d5; font-weight:600;">
                                    (<span th:text="${#numbers.formatDecimal(acc.prezzo, 1, 2)}">3.50</span> €)
                                </span>
                                <span th:if="${acc.tipo}" style="font-style:italic; color:#666;">
                                    - <span th:text="${#strings.replace(acc.tipo, '_', ' ')}">Tipo</span>
                                </span>
                            </span>
                        </label>
                    </li>
                </ul>
            </div>
            <div style="margin-top:24px;">
                <label for="emailUtente" style="font-weight:600; color:#666; margin-bottom: 6px; display:block;">
                    Email:
                </label>
                <input id="emailUtente" name="email" type="email" required placeholder="Inserisci la tua email"
                       style="width:100%; padding: 12px 18px; border-radius: 20px; border: 1px solid #0099d5;
                              background: rgba(255,255,255,0.95); font-size:15px; margin-bottom: 8px; box-sizing: border-box;" />
            </div>
            <div style="margin-top:12px;">
                <label for="passwordUtente" style="font-weight:600; color:#666; margin-bottom: 6px; display:block;">
                    Password:
                </label>
                <input id="passwordUtente" name="password" type="password" required placeholder="Inserisci la tua password"
                       style="width:100%; padding: 12px 18px; border-radius: 20px; border: 1px solid #0099d5;
                              background: rgba(255,255,255,0.95); font-size:15px; margin-bottom: 8px; box-sizing: border-box;" />
            </div>
            <!-- Hidden fields for targa, dataRitiro, dataConsegna -->
            <input type="hidden" name="targa" th:value="${scooter.targa}" />
            <input type="hidden" name="dataRitiro" th:value="${dataRitiro}" />
            <input type="hidden" name="dataConsegna" th:value="${dataConsegna}" />
            <div style="margin-top:30px; text-align:center; display:flex; justify-content: center; gap: 12px;">
                <button type="submit"
                        style="
                          background: linear-gradient(45deg, #0099d5, #007ab8);
                          color: white; border: none; padding: 13px 33px;
                          border-radius: 25px; font-size: 15px; font-weight: 600;
                          letter-spacing: 0.5px; cursor: pointer; box-shadow: 0 8px 20px rgba(0,153,213,0.15);
                          transition: all 0.3s cubic-bezier(0.4,0,0.2,1);">
                    Prenota
                </button>
                <button type="button"
                        style="
                          background: #dc3545;
                          color: white; border: none; padding: 13px 33px;
                          border-radius: 25px; font-size: 15px; font-weight: 600;
                          letter-spacing: 0.5px; cursor: pointer; box-shadow: 0 8px 20px rgba(0,0,0,0.08);
                          transition: all 0.3s cubic-bezier(0.4,0,0.2,1);"
                        onclick="closeOpzioniPrenotazionePopup()">
                    Chiudi
                </button>
            </div>
        </form>
    </div>
</div>